
\documentclass[a4paper,UKenglish]{lipics-v2018}
%This is a template for producing LIPIcs articles. 
%See lipics-manual.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
% for section-numbered lemmas etc., use "numberwithinsect"

\usepackage{microtype}%if unwanted, comment out or use option "draft"
\usepackage{tikz}
\usetikzlibrary{arrows,positioning,decorations.pathreplacing,automata,shadows}
\usepackage{tikz-cd}
\usepackage{stmaryrd}
\usepackage{bussproofs}
\usepackage{todonotes}

%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the recommnded bibstyle


% Syntax 
%\newcommand{\Nat}{\textnormal{Nat}}
\newcommand{\Nat}{\mathbb{N}}

\newcommand{\Succ}{\operatorname{S}}
\newcommand{\Zero}{\textnormal{Z}}
\newcommand{\Fix}{\operatorname{fix}}
\newcommand{\Unroll}{\operatorname{unroll}}
\newcommand{\Pos}{\operatorname{Pos}}
\newcommand{\In}{\operatorname{in}}
\newcommand{\Inr}{\operatorname{inl}}
\newcommand{\Inl}{\operatorname{inr}}
\newcommand{\Out}{\operatorname{out}}
\newcommand{\Ret}{\operatorname{return}}
\newcommand{\Bind}[3]{\operatorname{let} #2 \Leftarrow #1 \operatorname{in} #3}
\newcommand{\lcase}[3]{\operatorname{case} #1 \operatorname{of} \, \Zero \Rightarrow #2; \Succ(x) \Rightarrow #3}
\newcommand{\scase}[3]{\operatorname{case} #1 \operatorname{of} \, \Inl(x) \Rightarrow #2; \Inr (x) \Rightarrow #3}
\newcommand{\pcase}[2]{\operatorname{case} #1 \operatorname{of} \, (x,y) \Rightarrow #2}

% Trees

\newcommand{\Trees}{\textnormal{Trees}}
\newcommand{\Tree}{\textnormal{Trees}} %%%!!!

\newcommand{\Treeleq}{\sqsubseteq}

\newcommand{\Basicleq}{\preccurlyeq}

% Results
\newcommand{\res}{\operatorname{results}}

% Effects 
\newcommand{\prEff}{\operatorname{\textsf{pr}}}
\newcommand{\orEff}{\operatorname{\textsf{or}}}
\newcommand{\exEff}{\operatorname{\textsf{raise}}}

\newcommand{\prnd}{\text{pr/nd}}
\newcommand{\pr}{\text{pr}}
\newcommand{\nd}{\text{nd}}
\newcommand{\ang}{\text{ang}}
\newcommand{\dem}{\text{dem}}
\newcommand{\prang}{\text{pr/ang}}
\newcommand{\prdem}{\text{pr/dem}}

\newcommand{\Op}{\text{op}}
\newcommand{\Den}{\text{den}}
\newcommand{\Ax}{\text{ax}}

% Denotational

\newcommand{\Sem}[1]{\llbracket #1 \rrbracket}

\newcommand{\Set}{\mathbf{Set}}
\newcommand{\ContAlg}{\mathbf{ContAlg}}

\newcommand{\wCPO}{\mathbf{{\omega}CPO}}

\newcommand{\Conv}{\text{conv}}

% Axiomatic

\newcommand{\Vars}{\mathsf{Vars}}

\newcommand{\Iterx}[1]{(1\!-\!2^{- #1})x}
\newcommand{\Iter}[2]{(1\!-\!2^{- #2})#1}


% Reduction
\newcommand{\reduces}{\rightarrowtail}
\newcommand{\reductionPair}[2]{#1 \leadsto #2}
\newcommand{\sqeq}{\sqsubseteq}


% Mixed non-determinism
\newcommand{\drop}{\operatorname{drop}}
\newcommand{\odd}{\operatorname{odd}}
\newcommand{\even}{\operatorname{even}}

% Theorem environments
\theoremstyle{plain}
\newtheorem{proposition}[theorem]{Proposition}

\title{Basic operational preorders  for algebraic effects in general, and for
combined probability and nondeterminism in particular}

\titlerunning{Basic operational preorders for probability and nondeterminism}%optional, please use if title is longer than one line

\author{Aliaume Lopez}{\'Ecole Normale Sup\'erieure Paris-Saclay\\{Universit\'e Paris-Saclay, France}}{aliaume.lopez@ens-paris-saclay.fr}{}{}%mandatory, please use full name; only 1 author per \author macro; first two parameters are mandatory, other parameters can be empty.

\author{Alex Simpson}{Faculty of Mathematics and Physics\\{University of Ljubljana, Slovenia}}{Alex.Simpson@fmf.uni-lj.si}{}{}



\authorrunning{A. Lopez and A. Simpson}%mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et. al.'

\Copyright{Aliaume Lopez and Alex Simpson}%mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\subjclass{Dummy classification}% mandatory: Please choose ACM 2012 classifications from https://www.acm.org/publications/class-2012 or https://dl.acm.org/ccs/ccs_flat.cfm . E.g., cite as "General and reference $\rightarrow$ General literature" or \ccsdesc[100]{General and reference~General literature}. 

\keywords{contextual equivalence, algebraic effects, operational semantics, domain theory, nondeterminism, probabilistic choice, Markov decision process}%mandatory

\category{}%optional, e.g. invited paper

\relatedversion{}%optional, e.g. full version hosted on arXiv, HAL, or other respository/website

\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...

\funding{}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.

\acknowledgements{We thank Gordon Plotkin, Matija Pretnar  and Niels Voorneveld for helpful discussions.}%optional

%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{John Q. Open and Joan R. Access}
\EventNoEds{2}
\EventLongTitle{42nd Conference on Very Important Topics (CVIT 2016)}
\EventShortTitle{For review}
\EventAcronym{CVIT}
\EventYear{2016}
\EventDate{December 24--27, 2016}
\EventLocation{Little Whinging, United Kingdom}
\EventLogo{}
\SeriesVolume{42}
\ArticleNo{23}
%\nolinenumbers %uncomment to disable line numbering
%\hideLIPIcs  %uncomment to remove references to LIPIcs series (logo, DOI, ...), e.g. when preparing a pre-final version to be uploaded to arXiv or another public repository
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\maketitle

\begin{abstract}
The ``generic operational metatheory'' of  Johann, Simpson and Voigtl\"{a}nder (LiCS 2010) defines
contextual equivalence, 
in the presence of algebraic effects, in terms of a
\emph{basic operational preorder} on ground-type effect trees. We propose three general approaches to 
specifying such preorders: (i)~operational (ii)~denotational, and (iii)~axiomatic; coinciding with the three major styles of program semantics. We illustrate these via a nontrivial case study: the combination of probabilistic choice with nondeterminism, for which we show that  natural instantiations of the three specification methods (operational in terms of Markov decision processes, denotational using  a powerdomain, and axiomatic) all determine the same canonical preorder. We do this in the case of both angelic and demonic nondeterminism. 
%I DO NOT THINK WE WILL HAVE SPACE FOR:
%We further show how basic operational preorders support a manageable theory of contextual equivalence for call-by-value languages, complementing the call-by-name case previously treated in the literature.
 \end{abstract}


\input{csl-parts/intro}

\input{csl-parts/trees}

\input{csl-parts/basic}

\input{csl-parts/operational-order}

\input{csl-parts/denotational-order}

\input{csl-parts/axiomatic-order}

\input{csl-parts/equivalence-theorem}


\section{Related and future work}
\label{section:conclusions}

The results in this paper concern three methods of defining \emph{basic operational preorders} on effect trees, which we claim to be a useful abstraction for defining contextual preorder for programming languages with algebraic effects. This has been verified for simple call-by-name~\cite{gom} and call-by-value\footnotemark[3] languages, but needs further substantiation.

The axiomatic approach to defining basic operational preorders in Section~\ref{section:axiomatic} is close in spirit to the algebraic axiomatisation of effects of Plotkin and Power~\cite{PlotkinPower2002}, but with a different focus. 
In~\cite{PlotkinPower2002}, (in)equational axiomatisations are required in order to determine a
free-algebra monad modelling denotational equality of programs. Such axiomatisations have also been used to combine effects~\cite{hyland2006combining},
 and to induce a logic of effects~\cite{PlotkinPretnarLogic}; but they have not 
 hitherto been explicated as a method for defining  contextual preorder/equivalence. 
 In this paper, we have used  infinitary Horn clause axioms between infinitary terms for this purpose, with the notion of admissible model playing an important role.
 
 The main coincidence theorem in Section~\ref{section:equivalence} has some precursors in the literature. 
 The characterisations of  $\mathcal{H}\mathcal{V}_{\leq 1} D$
 and  $\mathcal{S}\mathcal{V}_{\leq 1} D$ as free Kegelspitze in~\cite{KeimelP2016} can be viewed as completeness theorems for inequational axiomatisations with respect to
 \emph{domains} $D$. In the special case $D = \mathbb{N}$, this follows from our results, for it can be derived from Lemma~\ref{lemma:completeness} that the partial-order quotients of 
 $\Tree(\mathbb{N})$ by $\Basicleq^\Ax_\prang$ and $\Basicleq^\Ax_\prdem$ are isomorphic to
  $\mathcal{H}\mathcal{V}_{\leq 1} \mathbb{N}$
 and  $\mathcal{S}\mathcal{V}_{\leq 1} \mathbb{N}\,$.  Another related completeness result is given in~\cite{mislove2004axioms},  where inequational axioms for 
 a simple process algebra with nondeterministic and probabilistic choice are proved
 complete with respect to a domain-theoretic semantics. Translated into our setting, this process algebra corresponds to  \emph{regular trees} in a signature that combines
 the operations $\orEff$, $\prEff$ with an additional prefix operation and zero constant.
In~\cite{mislove2004axioms}, the semantics uses the convex powerdomain, rather than the upper $\mathcal{S}$ and lower $\mathcal{H}$ that we consider. Although, in  the present paper, we have 
not considered  convex powerdomains and the associated \emph{neutral} (as opposed to angelic or demonic) nondeterminism, it would be a natural extension to do so.

The main limitation we see of the present paper is the restriction throughout to \emph{admissible} basic operational preorders. The admissibility condition plays a fundamental role in almost everything we do. It is, however, violated by some natural operational preorders; for example,  for countable demonic nondeterminism. 
It is an open question how to incorporate such more general preorders into our general theory.








%%
%% Bibliography
%%

%% Please use bibtex, 

\bibliography{bibliographie}

%\newpage

%\appendix

%\input{csl-parts/pcf}

%\input{csl-parts/rewriting}

%\input{csl-parts/contextual}

%\input{csl-parts/logical}



%\input{csl-parts/domains}

%\input{csl-parts/free}

%\input{csl-parts/mixed}

%\input{csl-parts/conclusion}

%\input{csl-parts/appendix}



\end{document}
